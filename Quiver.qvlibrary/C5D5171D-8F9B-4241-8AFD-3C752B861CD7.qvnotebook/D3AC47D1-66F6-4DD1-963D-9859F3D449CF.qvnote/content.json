{
  "title": "python中sys.path详解",
  "cells": [
    {
      "type": "text",
      "data": "<p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">如何将路径“永久\"添加到sys.path?<br></p><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);\"><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">sys.path是python的搜索模块的路径集，是一个list</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">可以在python 环境下使用sys.path.append(path)添加相关的路径，但在退出python环境后自己添加的路径就会自动消失了！</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">可以使用以下命令输入当前python 的搜索路径：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">python -c\"import sys;print '当前的python是:'+sys.prefix;print '\\n'.join(sys.path)\"</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">练习使用sys.path.append方法添加路径，显示退出python会消失！</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">python -c\"import sys;print '当前的python是:'+sys.prefix;sys.path.append(r'E:\\DjangoWord' ) ;print '\\n'.join(sys.path)\"</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">再次运行，会发现 自己添加路径E:\\DjangoWord()不存在了!</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">python -c\"import sys;print '当前的python是:'+sys.prefix;print '\\n'.join(sys.path)\"</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">为解决这个问题，可以有以下方法：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">将自己做的py文件放到 site_packages 目录下：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">下面命令显示了 site-packages 目录：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">python -c \"from distutils.sysconfig import get_python_lib; print get_python_lib() \"</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;但是这样做会导致一个问题，即各类模块都放到此文件夹的话，会导致乱的问题，这一点是显而易见的。</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;注意，也不创建子文件夹，再将自己的模块放到子文件夹解决问题，这会导致使用import 语句时错误。</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">使用pth文件，在 site-packages 文件中创建 .pth文件，将模块的路径写进去，一行一个路径，以下是一个示例，pth文件也可以使用注释：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\"># .pth file for the&nbsp;&nbsp;my project(这行是注释)</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">E:\\DjangoWord</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">E:\\DjangoWord\\mysite</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">E:\\DjangoWord\\mysite\\polls</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">这个不失为一个好的方法，但存在管理上的问题，而且不能在不同的python版本中共享。</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">使用PYTHONPATH环境变量，在这个环境变量中输入相关的路径，不同的路径之间用逗号（英文的！)分开，如果PYTHONPATH 变量还不存在，可以创建它！</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">路径会自动加入到sys.path中，而且可以在不同的python版本中共享，应该是一样较为方便的方法。</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">关于与python相关的环境变量有那些，请参考：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\"><a rel=\"nofollow\" href=\"http://docs.python.org/using/cmdline.html\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(16, 117, 182); text-decoration: none; margin: 0px; padding: 0px; outline: none; background-position: initial initial; background-repeat: initial initial;\">http://docs.python.org/using/cmdline.html</a>&nbsp;&nbsp;&nbsp;在页面上找到PYTHONPATH</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">以下是该环境变量的描述：</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">PYTHONPATH?</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">Augment the default search path for module files. The format is the same as the shell’s PATH : one or more directory pathnames separated by os.pathsep (e.g. colons on Unix or semicolons on Windows). Non-existent directories are silently ignored.</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">In addition to normal directories, individual PYTHONPATH entries may refer to zipfiles containing pure Python modules (in either source or compiled form). Extension modules cannot be imported from zipfiles.</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">The default search path is installation dependent, but generally begins with prefix /lib/python version (see PYTHONHOME above). It is always appended to PYTHONPATH .</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">&nbsp;</p><p align=\"left\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal;\">An additional directory will be inserted in the search path in front of PYTHONPATH as described above under Interface options . The search path can be manipulated from within a Python program as the variable sys.path .</p><wbr style=\"box-sizing: border-box;\"></div><br style=\"box-sizing: border-box; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\">转自：<a href=\"http://book.51cto.com/art/201005/198555.htm\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(202, 12, 22); text-decoration: none; margin: 0px; padding: 0px; outline: none; background-position: initial initial; background-repeat: initial initial;\">http://book.51cto.com/art/201005/198555.htm</a></p><p style=\"box-sizing: border-box; margin: 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"></p><h1 style=\"box-sizing: border-box; margin: 0px; font-size: 22px; font-family: 宋体; font-weight: 100; line-height: 42px; color: rgb(69, 69, 69); padding: 12px 0px 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; height: 45px; text-align: center; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(216, 217, 217);\">动态地改变Python搜索路径</h1><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(0, 102, 0); font-family: 宋体; font-size: 14px; line-height: 26px;\">《Python Cookbook（第2版）中文版》第2章文件，本章呈现了操作文件中的数据以及操纵文件系统下的文件和目录的一些技术，还包括了处理特定的文件格式以及存档格式的内容，比如tar和zip格式。本节为大家介绍动态地改变Python搜索路径。</span><br style=\"box-sizing: border-box;\"></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><br style=\"box-sizing: border-box;\"></div><div style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; text-align: center;\">2.21&nbsp; 动态地改变Python搜索路径</span></p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">感谢：Robin Parmar</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">任务</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">模块必须处于Python搜索路径中才能被导入，但你不想设置个永久性的大路径，因为那样可能会影响性能，所以，你希望能够动态地改变这个路径。</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">解决方案</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">只需简单地在Python的sys.path中加入一个\"目录\"，不过要小心重复的情况：</p><pre style=\"box-sizing: border-box; font-family: &quot;Courier New&quot;, monospace; font-size: 13px; white-space: pre-wrap; padding: 0px; margin-top: 0px; margin-bottom: 1em; line-height: 28px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(230, 230, 230); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; width: 591.016px; overflow: auto;\"><ol class=\"dp-xml\" style=\"box-sizing: border-box; margin-left: 55px; padding: 5px 0px; list-style-position: initial; list-style-image: initial; color: rgb(92, 92, 92); word-wrap: break-word; word-break: normal; border: none; background-color: rgb(247, 247, 247); margin-top: 0px !important; margin-bottom: 1px !important; margin-right: 0px !important;\"><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">def&nbsp;AddSysPath(new_path): &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\"\"&nbsp;AddSysPath(new_path)：给Python的sys.path增加一个\"目录\" &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果此目录不存在或者已经在sys.path中了，则不操作 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;返回1表示成功，-1表示new_path不存在，0表示已经在sys.path中了 &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;already&nbsp;on&nbsp;sys.path. &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\"\" &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;sys,&nbsp;os &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;避免加入一个不存在的目录 &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;os.path.exists(new_path):&nbsp;return&nbsp;-1 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将路径标准化。&nbsp;Windows是大小写不敏感的，所以若确定在 &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Windows下，将其转成小写 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">new_path</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;=&nbsp;</span><span class=\"attribute-value\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: blue; border: none;\">os</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">.path.abspath(new_path) &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">sys.platform</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;==&nbsp;'win32': &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">new_path</span><span class=\"attribute-value\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: blue; border: none;\">new_path</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;=&nbsp;new_path.lower(&nbsp;) &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;检查当前所有的路径 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;x&nbsp;in&nbsp;sys.path: &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">x</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;=&nbsp;</span><span class=\"attribute-value\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: blue; border: none;\">os</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">.path.abspath(x) &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">sys.platform</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;==&nbsp;'win32': &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">x</span><span class=\"attribute-value\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: blue; border: none;\">x</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;=&nbsp;x.lower(&nbsp;) &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;new_path&nbsp;in&nbsp;(x,&nbsp;x&nbsp;+&nbsp;os.sep): &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.path.append(new_path) &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果想让new_path在sys.path处于最前 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用：sys.path.insert(0,&nbsp;new_path) &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">if&nbsp;_&nbsp;_name_&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">_</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;==&nbsp;'_&nbsp;_main_&nbsp;_': &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;测试，显示用法 &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;sys &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;'Before:' &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;x&nbsp;in&nbsp;sys.path:&nbsp;print&nbsp;x &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;</span><span class=\"attribute\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; color: red; border: none;\">sys.platform</span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;==&nbsp;'win32': &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;AddSysPath('c:\\\\Temp') &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;AddSysPath('c:\\\\temp') &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;else: &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;AddSysPath('/usr/lib/my_modules') &nbsp;</span></li><li style=\"box-sizing: border-box; list-style: none; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;'After:' &nbsp;</span></li><li class=\"alt\" style=\"box-sizing: border-box; list-style: none; color: inherit; word-wrap: break-word; word-break: normal; border: none; line-height: 18px; margin: 0px !important; padding: 0px 3px 0px 10px !important;\"><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: black;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;x&nbsp;in&nbsp;sys.path:&nbsp;print&nbsp;x&nbsp;</span></li></ol></pre><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">讨论</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">模块要处于Python搜索路径中的目录里才能被导入，但我们不喜欢维护一个永久性的大目录，因为其他所有的Python脚本和应用程序导入模块的时候性能都会被拖累。本节代码动态地在该路径中添加了一个\"目录\"，当然前提是此目录存在而且此前不在sys.path中。</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">sys.path是个列表，所以在末尾添加目录是很容易的，用sys.path.append就行了。当这个append执行完之后，新目录即时起效，以后的每次import操作都可能会检查这个目录。如同解决方案所示，可以选择用sys.path.insert(0,…，这样新添加的目录会优先于其他目录被import检查。</p><p style=\"box-sizing: border-box; margin: 10px 0px; padding: 0px; word-wrap: break-word; word-break: normal; color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px;\">即使sys.path中存在重复，或者一个不存在的目录被不小心添加进来，也没什么大不了，Python的import语句非常聪明，它会自己应付这类问题。但是，如果每次import时都发生这种错误（比如，重复的不成功搜索，操作系统提示的需要进一步处理的错误），我们会被迫付出一点小小的性能代价。为了避免这种无谓的开销，本节代码在向sys.path添加内容时非常谨慎，绝不加入不存在的目录或者重复的目录。程序向sys.path添加的目录只会在此程序的生命周期之内有效，其他所有的对sys.path的动态操作也是如此。</p></div>"
    }
  ]
}