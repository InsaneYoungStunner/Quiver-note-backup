{
  "title": "Sessions（会话）与 Watches（监视）",
  "cells": [
    {
      "type": "text",
      "data": "<h2 trans_replace=\"0\" trans=\"1\" style=\"margin: 20px 0px 10px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.7; font-size: 16px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">Sessions（会话）</span></h2><p trans_replace=\"0\" trans=\"1\" style=\"margin: 0px 0px 5px; padding: 0px; word-wrap: break-word; color: rgb(0, 0, 0); line-height: 1.7; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">会话对于ZooKeeper的操作非常重要。</span><span style=\"margin: 0px; padding: 0px;\">会话中的请求按FIFO顺序执行。</span><span style=\"margin: 0px; padding: 0px;\">一旦客户端连接到服务器，将建立会话并向客户端分配<strong style=\"margin: 0px; padding: 0px;\">会话ID&nbsp;</strong>。</span></p><p trans_replace=\"0\" trans=\"1\" style=\"margin: 0px 0px 5px; padding: 0px; word-wrap: break-word; color: rgb(0, 0, 0); line-height: 1.7; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">客户端以特定的时间间隔发送<strong style=\"margin: 0px; padding: 0px;\">心跳</strong>以保持会话有效。</span><span style=\"margin: 0px; padding: 0px;\">如果ZooKeeper集合在超过服务器开启时指定的期间（会话超时）都没有从客户端接收到心跳，则它会判定客户端死机。</span></p><p trans_replace=\"0\" trans=\"1\" style=\"margin: 0px 0px 5px; padding: 0px; word-wrap: break-word; color: rgb(0, 0, 0); line-height: 1.7; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">会话超时通常以毫秒为单位。</span><span style=\"margin: 0px; padding: 0px;\">当会话由于任何原因结束时，在该会话期间创建的临时节点也会被删除。</span></p><h2 trans_replace=\"0\" trans=\"1\" style=\"margin: 20px 0px 10px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.7; font-size: 16px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">Watches（监视）<br style=\"margin: 0px; padding: 0px;\"></span></h2><p trans_replace=\"0\" trans=\"1\" style=\"margin: 0px 0px 5px; padding: 0px; word-wrap: break-word; color: rgb(0, 0, 0); line-height: 1.7; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">监视是一种简单的机制，使客户端收到关于ZooKeeper集合中的更改的通知。</span><span style=\"margin: 0px; padding: 0px;\">客户端可以在读取特定znode时设置Watches。</span><span style=\"margin: 0px; padding: 0px;\">Watches会向注册的客户端发送任何znode（客户端注册表）更改的通知。</span></p><p trans_replace=\"0\" trans=\"1\" style=\"margin: 0px 0px 5px; padding: 0px; word-wrap: break-word; color: rgb(0, 0, 0); line-height: 1.7; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px;\">Znode更改是与znode相关的数据的修改或znode的子项中的更改。</span><span style=\"margin: 0px; padding: 0px;\">只触发一次watches。</span><span style=\"margin: 0px; padding: 0px;\">如果客户端想要再次通知，则必须通过另一个读取操作来完成。</span><span style=\"margin: 0px; padding: 0px;\">当连接会话过期时，客户端将与服务器断开连接，相关的watches也将被删除。</span></p>"
    }
  ]
}